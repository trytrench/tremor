'use client';
"use strict";var e=require("tslib"),t=require("react"),r=require("../../../lib/shape.cjs"),a=require("../../../lib/sizing.cjs"),l=require("../../../lib/spacing.cjs"),n=require("../../../lib/utils.cjs"),o=require("../../../lib/tremorTwMerge.cjs");require("../../../contexts/BaseColorContext.cjs"),require("../../../contexts/IndexContext.cjs"),require("../../../contexts/RootStylesContext.cjs");var s=require("../../../contexts/SelectedValueContext.cjs"),d=require("../../../hooks/useInternalState.cjs"),u=require("../../../assets/ArrowDownHeadIcon.cjs"),i=require("../../../assets/SearchIcon.cjs"),m=require("../../../assets/XCircleIcon.cjs"),c=require("../selectUtils.cjs"),g=require("@headlessui/react"),f=require("../../../assets/XIcon.cjs");function b(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=b(t);const x=n.makeClassName("MultiSelect"),k=p.default.forwardRef(((n,b)=>{const{defaultValue:k,value:h,onValueChange:w,placeholder:v="Select...",disabled:E=!1,icon:N,children:j,className:q}=n,M=e.__rest(n,["defaultValue","value","onValueChange","placeholder","disabled","icon","children","className"]),T=N,[C,y]=d(k,h),[I,z]=t.useState(""),S=(null!=C?C:[]).length>0,V=t.useMemo((()=>c.getFilteredOptions(I,j)),[I,j]);return p.default.createElement(g.Listbox,Object.assign({as:"div",ref:b,defaultValue:C,value:C,onChange:e=>{null==w||w(e),y(e)},disabled:E,className:o.tremorTwMerge("w-full min-w-[10rem] relative text-tremor-default",q)},M,{multiple:!0}),(({value:e})=>p.default.createElement(p.default.Fragment,null,p.default.createElement(g.Listbox.Button,{className:o.tremorTwMerge("w-full outline-none text-left whitespace-nowrap truncate rounded-tremor-default focus:ring-2 transition duration-100","border-tremor-border shadow-tremor-input focus:border-tremor-brand-subtle focus:ring-tremor-brand-muted","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:focus:border-dark-tremor-brand-subtle dark:focus:ring-dark-tremor-brand-muted",T?"p-10 -ml-0.5":l.spacing.lg.paddingLeft,l.spacing.fourXl.paddingRight,l.spacing.xs.paddingY,r.border.sm.all,c.getSelectButtonColors(e.length>0,E))},T&&p.default.createElement("span",{className:o.tremorTwMerge("absolute inset-y-0 left-0 flex items-center ml-px",l.spacing.md.paddingLeft)},p.default.createElement(T,{className:o.tremorTwMerge(x("Icon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",a.sizing.lg.height,a.sizing.lg.width)})),p.default.createElement("div",{className:"h-6 flex items-center"},e.length>0?p.default.createElement("div",{className:"flex flex-nowrap overflow-x-scroll [&::-webkit-scrollbar]:hidden gap-x-1 mr-5 -ml-1.5 relative"},V.filter((t=>e.includes(t.props.value))).map(((t,r)=>{var a;return p.default.createElement("div",{key:r,className:o.tremorTwMerge("max-w-[100px] lg:max-w-[200px] flex justify-center items-center pl-2 pr-1.5 py-1 font-medium","rounded-tremor-small","bg-tremor-background-muted dark:bg-dark-tremor-background-muted","bg-tremor-background-subtle dark:bg-dark-tremor-background-subtle","text-tremor-content-default dark:text-dark-tremor-content-default","text-tremor-content-emphasis dark:text-dark-tremor-content-emphasis")},p.default.createElement("div",{className:"text-xs truncate "},null!==(a=t.props.children)&&void 0!==a?a:t.props.value),p.default.createElement("div",{onClick:r=>{r.preventDefault();const a=e.filter((e=>e!==t.props.value));null==w||w(a),y(a)}},p.default.createElement(f,{className:o.tremorTwMerge(x("clearIconItem"),"cursor-pointer rounded-tremor-full w-3.5 h-3.5 ml-2","text-tremor-content-subtle hover:text-tremor-content","dark:text-dark-tremor-content-subtle dark:hover:text-tremor-content")})))}))):p.default.createElement("span",null,v)),p.default.createElement("span",{className:o.tremorTwMerge("absolute inset-y-0 right-0 flex items-center",l.spacing.md.marginRight)},p.default.createElement(u,{className:o.tremorTwMerge(x("arrowDownIcon"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",a.sizing.md.height,a.sizing.md.width)}))),S&&!E?p.default.createElement("button",{type:"button",className:o.tremorTwMerge("absolute inset-y-0 right-0 flex items-center",l.spacing.fourXl.marginRight),onClick:e=>{e.preventDefault(),y([]),null==w||w([])}},p.default.createElement(m,{className:o.tremorTwMerge(x("clearIconAllItems"),"flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",a.sizing.md.height,a.sizing.md.width)})):null,p.default.createElement(g.Listbox.Options,{className:o.tremorTwMerge("absolute z-10 divide-y overflow-y-auto max-h-[228px] w-full left-0 outline-none rounded-tremor-default","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown",l.spacing.twoXs.marginTop,l.spacing.twoXs.marginBottom,r.border.sm.all)},p.default.createElement("div",{className:o.tremorTwMerge("flex items-center w-full","bg-tremor-background-muted","dark:bg-dark-tremor-background-muted",l.spacing.md.paddingX)},p.default.createElement("span",null,p.default.createElement(i,{className:o.tremorTwMerge("flex-none","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle",l.spacing.sm.marginRight,a.sizing.md.height,a.sizing.md.width)})),p.default.createElement("input",{name:"search",type:"input",placeholder:"Search",className:o.tremorTwMerge("w-full focus:outline-none focus:ring-none bg-transparent text-tremor-default","text-tremor-content-emphasis","dark:text-dark-tremor-content-emphasis",l.spacing.sm.paddingY),onChange:e=>z(e.target.value)})),p.default.createElement(s.Provider,{value:{selectedValue:e}},V)))))}));k.displayName="MultiSelect",module.exports=k;
